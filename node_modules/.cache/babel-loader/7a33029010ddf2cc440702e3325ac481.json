{"ast":null,"code":"import { serverIpAddress } from './../constanst';\n\nconst _require = require('./networking'),\n      axios = _require.axios;\n\nexport const getStaffsSale = callback => {\n  const url = \"\".concat(serverIpAddress, \"api/restaurant/report/getStaffsSaleDaily\");\n  axios.get(url).then(response => {\n    callback(response.data);\n  });\n};\nexport const getTables = callback => {\n  const url = \"\".concat(serverIpAddress, \"api/restaurant/tables/tables\");\n  axios.get(url).then(response => {\n    callback(response.data);\n  });\n};\nexport const getSomtum = callback => {\n  const url = \"\".concat(serverIpAddress, \"api/restaurant/tables/tables/getSomtumPrinter\");\n  axios.get(url).then(response => {\n    callback(response);\n  });\n};\nexport const changeSomtum = callback => {\n  const url = \"\".concat(serverIpAddress, \"api/restaurant/tables/tables/changeSomtumPrinter\");\n  axios.post(url).then(response => {\n    callback(response);\n  });\n};\nexport const isTableOnHold = (table_number, callback) => {\n  const url = \"\".concat(serverIpAddress, \"api/restaurant/tables/tables/\").concat(table_number);\n  axios.get(url).then(response => {\n    console.log(response);\n    const body = response.data[0][0];\n\n    if (body.status === 'available') {\n      callback({\n        status: 'available'\n      });\n    } else {\n      callback({\n        status: body.status,\n        short_name: body.short_name\n      });\n    }\n  });\n};\nexport const updateTableStatus = (number, status, userId) => {\n  const url = \"\".concat(serverIpAddress, \"api/restaurant/tables/tables/update-table-status\");\n  axios.put(url, {\n    number,\n    status,\n    hold_by: userId\n  }).then().catch(e => console.log(e));\n};\nexport const activeMorningShift = (user_id, callback) => {\n  const url = \"\".concat(serverIpAddress, \"api/restaurant/tables/shifts/active-morning-shift\");\n  axios.post(url, {\n    user_id\n  }).then(response => {\n    callback(response.data);\n  }).catch(e => console.log(e));\n};\nexport const getCurrentShift = callback => {\n  const url = \"\".concat(serverIpAddress, \"api/restaurant/tables/shifts/current-shift\");\n  axios.get(url).then(response => {\n    if (response.status === 200) {\n      callback(response.data);\n    } else {\n      callback({\n        status: 'inactive'\n      });\n    }\n  });\n};\nexport const changeShift = (user_id, passcode, period, callback) => {\n  var url;\n\n  if (period === 'morning') {\n    url = \"\".concat(serverIpAddress, \"api/restaurant/tables/shifts/save-morning-shift\");\n  } else {\n    url = \"\".concat(serverIpAddress, \"api/restaurant/tables/shifts/save-afternoon-shift\");\n  }\n\n  axios.post(url, {\n    user_id,\n    passcode\n  }).then(response => {\n    if (response.data.status) {\n      callback(true, response.data.msg);\n    } else {\n      callback(false, response.data.msg || 'เกิดข้อผิดพลาด');\n    }\n  }).catch(eroor => {\n    console.log(eroor);\n    callback(false, 'เกิดข้อผิดพลาด');\n  });\n};\nexport const getHistrotyTable = callback => {\n  var url = \"\".concat(serverIpAddress, \"api/restaurant/tables/tables/history-tables\");\n  axios.get(url).then(response => {\n    var tables = response.data;\n    tables.tables.sort(function (a, b) {\n      return new Date(b.close_at) - new Date(a.close_at);\n    });\n    callback(tables);\n  }).catch(error => {\n    console.log(error);\n    callback([]);\n  });\n};\nexport const submitRefund = ({\n  amount,\n  remark,\n  table_id,\n  user_id\n}, callback) => {\n  console.log('amount: ', amount);\n  var url = \"\".concat(serverIpAddress, \"api/restaurant/tables/customer-tables/submit-refund\");\n  axios.post(url, {\n    amount,\n    remark,\n    table_id,\n    user_id\n  }).then(response => {\n    if (response.data.status) {\n      callback(true, response.data.msg);\n    } else {\n      callback(false, response.data.msg);\n    }\n  }).catch(e => {\n    console.log(e);\n    callback(false, 'เกิดข้อผิดพลาด');\n  });\n}; // export const createCustomerTable = ({\n//   table_number,\n//   number_of_guest,\n//   language,\n//   zone,\n//   create_by\n// }) => {\n//   const url = `${ serverIpAddress }api/restaurant/tables/customer-tables/add`;\n//   axios.post(url, {\n//     table_number,\n//     number_of_guest,\n//     language,\n//     zone,\n//     create_by\n//   }).then().catch(err => console.log(err));\n// }","map":{"version":3,"sources":["/home/olotem321/jep-cashier-2021-2/src/brains/tables.js"],"names":["serverIpAddress","require","axios","getStaffsSale","callback","url","get","then","response","data","getTables","getSomtum","changeSomtum","post","isTableOnHold","table_number","console","log","body","status","short_name","updateTableStatus","number","userId","put","hold_by","catch","e","activeMorningShift","user_id","getCurrentShift","changeShift","passcode","period","msg","eroor","getHistrotyTable","tables","sort","a","b","Date","close_at","error","submitRefund","amount","remark","table_id"],"mappings":"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","sourcesContent":["import  {serverIpAddress} from './../constanst';\r\n\r\nconst { axios } = require('./networking');\r\n\r\nexport const getStaffsSale = callback => {\r\n    const url = `${ serverIpAddress }api/restaurant/report/getStaffsSaleDaily`;\r\n     axios.get(url).then((response) => {\r\n    callback(response.data);\r\n  });\r\n}\r\n\r\nexport const getTables = (callback) => {\r\n  const url = `${ serverIpAddress }api/restaurant/tables/tables`;\r\n  axios.get(url).then((response) => {\r\n    callback(response.data);\r\n  });\r\n}\r\n\r\nexport const getSomtum = (callback) => {\r\n    const url = `${ serverIpAddress }api/restaurant/tables/tables/getSomtumPrinter`;\r\n    axios.get(url).then((response) => {\r\n    callback(response);\r\n  });\r\n}\r\n\r\nexport const changeSomtum = (callback) => {\r\n    const url = `${ serverIpAddress }api/restaurant/tables/tables/changeSomtumPrinter`;\r\n    axios.post(url).then((response) => {\r\n    callback(response);\r\n  });\r\n}\r\n\r\nexport const isTableOnHold = (table_number, callback) => {\r\n  const url = `${ serverIpAddress }api/restaurant/tables/tables/${table_number}`;\r\n  axios.get(url).then(response => {\r\n    console.log(response);\r\n    const body = response.data[0][0];\r\n    if(body.status === 'available'){\r\n      callback({status: 'available'});\r\n    }else{\r\n      callback({\r\n        status: body.status,\r\n        short_name: body.short_name\r\n      })\r\n    }\r\n  });\r\n}\r\n\r\nexport const updateTableStatus = (number, status, userId) => {\r\n  const url = `${ serverIpAddress }api/restaurant/tables/tables/update-table-status`;\r\n  axios.put(url, {\r\n    number, status, hold_by: userId\r\n  }).then().catch(e => console.log(e));\r\n}\r\n\r\nexport const activeMorningShift = (user_id, callback) => {\r\n  const url = `${ serverIpAddress }api/restaurant/tables/shifts/active-morning-shift`;\r\n  axios.post(url, {\r\n    user_id\r\n  }).then((response) => {\r\n    callback(response.data);\r\n  }).catch(e => console.log(e));\r\n}\r\n\r\nexport const getCurrentShift = (callback) => {\r\n  const url = `${ serverIpAddress }api/restaurant/tables/shifts/current-shift`;\r\n  axios.get(url).then((response) => {\r\n    if(response.status === 200){\r\n      callback(response.data);\r\n    }else {\r\n      callback({status: 'inactive'});\r\n    }\r\n  })\r\n}\r\n\r\nexport const changeShift = (user_id, passcode, period, callback) => {\r\n  var url;\r\n  if(period === 'morning'){\r\n    url = `${ serverIpAddress }api/restaurant/tables/shifts/save-morning-shift`;\r\n  }else{\r\n    url = `${ serverIpAddress }api/restaurant/tables/shifts/save-afternoon-shift`;\r\n  }\r\n  axios.post(url, {user_id, passcode}).then((response) => {\r\n    if(response.data.status){\r\n      callback(true, response.data.msg);\r\n    }else{\r\n      callback(false, response.data.msg || 'เกิดข้อผิดพลาด');\r\n    }\r\n  }).catch(eroor => {\r\n    console.log(eroor);\r\n    callback(false, 'เกิดข้อผิดพลาด');\r\n  });\r\n}\r\n\r\nexport const getHistrotyTable = (callback) => {\r\n  var url = `${ serverIpAddress }api/restaurant/tables/tables/history-tables`;\r\n  axios.get(url).then((response) => {\r\n    var tables = response.data;\r\n    tables.tables.sort(function(a,b){\r\n      return new Date(b.close_at) - new Date(a.close_at);\r\n    });\r\n    callback(tables);\r\n  }).catch(error => {\r\n    console.log(error);\r\n    callback([]);\r\n  })\r\n}\r\n\r\n\r\nexport const submitRefund = ({amount, remark, table_id, user_id}, callback) => {\r\n  console.log('amount: ', amount);\r\n  var url = `${ serverIpAddress }api/restaurant/tables/customer-tables/submit-refund`;\r\n  axios.post(url, {amount, remark, table_id, user_id}).then(response => {\r\n    if(response.data.status){\r\n      callback(true, response.data.msg);\r\n    }else{\r\n      callback(false, response.data.msg);\r\n    }\r\n  }).catch(e => {\r\n    console.log(e);\r\n    callback(false, 'เกิดข้อผิดพลาด');\r\n  })\r\n}\r\n\r\n// export const createCustomerTable = ({\r\n//   table_number,\r\n//   number_of_guest,\r\n//   language,\r\n//   zone,\r\n//   create_by\r\n// }) => {\r\n//   const url = `${ serverIpAddress }api/restaurant/tables/customer-tables/add`;\r\n//   axios.post(url, {\r\n//     table_number,\r\n//     number_of_guest,\r\n//     language,\r\n//     zone,\r\n//     create_by\r\n//   }).then().catch(err => console.log(err));\r\n// }\r\n"]},"metadata":{},"sourceType":"module"}