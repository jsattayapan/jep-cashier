{"ast":null,"code":"var _jsxFileName = \"/home/olotem321/jep-cashier-2021-2/src/screens/LoginForm.js\";\nimport React from 'react';\nimport './Login.css';\nimport { TopBuffer } from '../helpers/utilities';\nimport Logo from '../assets/jep_logo.png';\nimport LoadingScreen from '../components/LoadingScreen';\nimport { TextInput } from '../components/TextInput';\nimport { login } from '../brains/user';\nimport { initialSocket } from '../brains/socket';\nimport { setJwtToken } from '../brains/networking';\n\nclass LoginForm extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: '',\n      password: '',\n      error: '',\n      submitButton: 'Login',\n      isLoading: false\n    };\n\n    this.onUsernameChange = e => {\n      const username = e.target.value;\n      this.setState(() => ({\n        username\n      }));\n    };\n\n    this.onPasswordChange = e => {\n      const password = e.target.value;\n      this.setState(() => ({\n        password\n      }));\n    };\n\n    this.verifyLogin = e => {\n      e.preventDefault();\n      this.setState(() => ({\n        submitButton: 'Loading...',\n        isLoading: true\n      }));\n\n      if (!this.state.username || !this.state.password) {\n        this.setState(() => ({\n          error: 'กรุณากรอก username และ password!',\n          submitButton: 'Login',\n          isLoading: false\n        }));\n      } else {\n        this.setState(() => ({\n          error: ''\n        }));\n        login(this.state.username, this.state.password, userAuth => {\n          if (userAuth.status) {\n            initialSocket(userAuth.data.id);\n            setJwtToken(userAuth.data.token);\n            this.props.onSubmit(userAuth.data);\n          } else {\n            this.setState(() => ({\n              error: userAuth.msg,\n              submitButton: 'Login',\n              isLoading: false\n            }));\n          }\n        });\n      }\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"mx-auto mainStyle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, this.state.isLoading && React.createElement(LoadingScreen, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-8 mx-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(TopBuffer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      alt: \"Jep's Logo\",\n      src: Logo,\n      width: \"300px\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    })), React.createElement(TopBuffer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }), this.state.error && React.createElement(\"p\", {\n      style: {\n        color: 'red'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, this.state.error), React.createElement(\"form\", {\n      onSubmit: this.verifyLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(TextInput, {\n      value: this.state.username,\n      onChange: this.onUsernameChange,\n      label: \"Username\",\n      type: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }), React.createElement(TopBuffer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }), React.createElement(TextInput, {\n      value: this.state.password,\n      onChange: this.onPasswordChange,\n      label: \"Password\",\n      type: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(TopBuffer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      onClick: this.verifyLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, this.state.submitButton))))));\n  }\n\n}\n\nexport default LoginForm;","map":{"version":3,"sources":["/home/olotem321/jep-cashier-2021-2/src/screens/LoginForm.js"],"names":["React","TopBuffer","Logo","LoadingScreen","TextInput","login","initialSocket","setJwtToken","LoginForm","Component","state","username","password","error","submitButton","isLoading","onUsernameChange","e","target","value","setState","onPasswordChange","verifyLogin","preventDefault","userAuth","status","data","id","token","props","onSubmit","msg","render","color"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nimport './Login.css';\r\nimport { TopBuffer } from '../helpers/utilities';\r\nimport Logo from '../assets/jep_logo.png';\r\nimport LoadingScreen from '../components/LoadingScreen'\r\nimport { TextInput } from '../components/TextInput';\r\n\r\nimport { login } from '../brains/user';\r\nimport { initialSocket } from '../brains/socket';\r\nimport { setJwtToken } from '../brains/networking';\r\n\r\n\r\nclass LoginForm extends React.Component{\r\n  state = {\r\n    username: '',\r\n    password: '',\r\n    error: '',\r\n    submitButton: 'Login',\r\n    isLoading: false\r\n  };\r\n  onUsernameChange = (e) => {\r\n    const username = e.target.value;\r\n    this.setState(() => ({ username }));\r\n  };\r\n  onPasswordChange = (e) => {\r\n    const password = e.target.value;\r\n    this.setState(() => ({ password }));\r\n  };\r\n  verifyLogin = (e) => {\r\n    e.preventDefault();\r\n    this.setState(() => ({\r\n      submitButton: 'Loading...',\r\n      isLoading: true\r\n    }));\r\n    if(!this.state.username || !this.state.password){\r\n      this.setState(() => ({\r\n        error: 'กรุณากรอก username และ password!',\r\n        submitButton: 'Login',\r\n        isLoading: false\r\n      }));\r\n    }else{\r\n      this.setState(() => ({ error: '' }));\r\n      login( this.state.username, this.state.password, (userAuth) => {\r\n        if(userAuth.status){\r\n          initialSocket(userAuth.data.id);\r\n          setJwtToken(userAuth.data.token);\r\n          this.props.onSubmit(userAuth.data);\r\n        }else{\r\n          this.setState(() => ({\r\n            error: userAuth.msg,\r\n            submitButton: 'Login',\r\n            isLoading: false\r\n          }));\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  render(){\r\n    return(\r\n      <div className=\"mx-auto mainStyle\">\r\n        <div className=\"container\">\r\n        { this.state.isLoading && <LoadingScreen /> }\r\n          <div className=\"col-8 mx-auto\">\r\n            <TopBuffer />\r\n            <div className=\"row justify-content-center\"><img alt=\"Jep's Logo\" src={Logo} width='300px'/></div>\r\n            <TopBuffer />\r\n            {this.state.error && <p style={{color:'red'}}>{this.state.error}</p>}\r\n            <form onSubmit={this.verifyLogin}>\r\n              <TextInput value={this.state.username} onChange={this.onUsernameChange} label='Username' type=\"text\" />\r\n              <TopBuffer />\r\n              <TextInput value={this.state.password} onChange={this.onPasswordChange} label='Password' type=\"password\" />\r\n              <TopBuffer />\r\n              <div className=\"row justify-content-center\">\r\n                  <button type=\"submit\" className=\"btn btn-primary\" onClick={this.verifyLogin}>{this.state.submitButton}</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default LoginForm;\r\n"]},"metadata":{},"sourceType":"module"}