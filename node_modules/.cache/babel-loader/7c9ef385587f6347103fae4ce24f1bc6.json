{"ast":null,"code":"var _jsxFileName = \"/home/olotem321/jep-cashier-2021-2/src/screens/Tables.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport swal from 'sweetalert';\nimport peopleIcon from \"./../assets/icons/people.svg\";\nimport { clearUser } from './../Redux/actions/user';\nimport { loadTables, setSectionTables, setHistoryTables } from './../Redux/actions/tables';\nimport { setSelectedTable, setCurrentOrders, setTableLogs } from './../Redux/actions/customerTable';\nimport { loadCookingFoodItems, loadCompleteFoodItems } from './../Redux/actions/foodItems';\nimport { getCookingFoods, getCompleteFoods } from './../brains/foodItems';\nimport { getTablesBySection } from './../Redux/selectors/tables';\nimport LoadingScreen from '../components/LoadingScreen';\nimport { HeaderBar } from './../components/HeaderBar';\nimport { TopBuffer } from '../helpers/utilities';\nimport RegisterTablePopup from './../components/RegisterTable';\nimport { getTables, isTableOnHold, updateTableStatus, activeMorningShift, changeShift, getHistrotyTable, submitRefund, getSomtum, changeSomtum, getStaffsSale } from './../brains/tables';\nimport { isAuth } from './../brains/authentication';\nimport { getCurrentOrder, createCustomerTable, getTableLogs, submitVoidPayment } from './../brains/customerTable';\nimport { logout, resetTableNUser } from '../brains/user';\nimport { formatNumber } from './../helpers/utilities';\nimport numeral from 'numeral';\nimport './Tables.css';\n\nvar moment = require('moment');\n\nclass Tables extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.calculateTotal = input => {\n      let cash = {\n        count: 0,\n        amount: 0\n      };\n      let card = {\n        count: 0,\n        amount: 0\n      };\n      let room = {\n        count: 0,\n        amount: 0\n      };\n      let transfer = {\n        count: 0,\n        amount: 0\n      };\n      let halfHalf = {\n        count: 0,\n        amount: 0\n      };\n      let ThaiChana = {\n        count: 0,\n        amount: 0\n      };\n      let GWallet = {\n        count: 0,\n        amount: 0\n      };\n      let serviceCharge = {\n        count: 0,\n        amount: 0\n      };\n\n      if (input.tables !== undefined) {\n        input.tables.forEach(x => {\n          console.log(cash.amount);\n          console.log(x);\n\n          if (x.service_charge_amount > 0) {\n            serviceCharge['count'] += 1;\n            serviceCharge['amount'] += x.service_charge_amount;\n          }\n\n          if (x.method === 'cash') {\n            cash['count'] += 1;\n            cash['amount'] += x.total_amount;\n          }\n\n          if (x.method === 'card') {\n            card['count'] += 1;\n            card['amount'] += x.total_amount;\n          }\n\n          if (x.method === 'transfer') {\n            transfer['count'] += 1;\n            transfer['amount'] += x.total_amount;\n          }\n\n          if (x.method === 'room') {\n            room['count'] += 1;\n            room['amount'] += x.total_amount;\n          }\n\n          if (x.method === 'multiple') {\n            x.multiple_payment.forEach(y => {\n              if (y.paymentType === 'cash') {\n                cash['count'] += 1;\n                cash['amount'] += y.amount;\n              }\n\n              if (y.paymentType === 'creditCard') {\n                card['count'] += 1;\n                card['amount'] += y.amount;\n              }\n\n              if (y.paymentType === 'halfHalf') {\n                halfHalf['count'] += 1;\n                halfHalf['amount'] += y.amount;\n              }\n\n              if (y.paymentType === 'transfer') {\n                transfer['count'] += 1;\n                transfer['amount'] += y.amount;\n              }\n\n              if (y.paymentType === 'ThaiChana') {\n                ThaiChana['count'] += 1;\n                ThaiChana['amount'] += y.amount;\n              }\n\n              if (y.paymentType === 'G-Wallet') {\n                GWallet['count'] += 1;\n                GWallet['amount'] += y.amount;\n              }\n            });\n          }\n        });\n      }\n\n      console.log(cash);\n      this.setState(() => ({\n        totalCash: cash,\n        totalCard: card,\n        totalTransfer: transfer,\n        totalRoom: room,\n        totalHalfHalf: halfHalf,\n        totalThaiChana: ThaiChana,\n        totalGWallet: GWallet,\n        totalServiceCharge: serviceCharge\n      }));\n    };\n\n    this.setSomtumPrinter = () => {\n      changeSomtum(res => {\n        this.setState(() => ({\n          somtumPrinter: res.data.value\n        }));\n      });\n    };\n\n    this.togglePopup = tableNumber => {\n      if (this.state.showPopup) {\n        console.log('Update statu to available');\n        updateTableStatus(this.state.tableNumber, 'available', '');\n      }\n\n      this.setState(state => ({\n        tableNumber,\n        showPopup: !state.showPopup\n      }));\n    };\n\n    this.tableBoxClick = tableInfo => {\n      this.setState({\n        isLoading: true\n      });\n      isTableOnHold(tableInfo.number, res => {\n        if (res.status === 'available') {\n          if (tableInfo.id !== null) {\n            updateTableStatus(tableInfo.number, 'on_order', this.props.user.id);\n            this.props.dispatch(setSelectedTable(tableInfo));\n            getCurrentOrder(tableInfo.id, response => {\n              this.props.dispatch(setCurrentOrders(response));\n              getTableLogs(tableInfo.id, logs => {\n                this.props.dispatch(setTableLogs(logs));\n                this.props.history.push('/customer-table');\n              });\n            });\n          } else {\n            console.log('Tabble Info: ', tableInfo);\n\n            if (tableInfo.outlet === 'customer') {\n              this.setState({\n                isLoading: false\n              });\n              updateTableStatus(tableInfo.number, 'on_create', this.props.user.id);\n              this.togglePopup(tableInfo.number);\n            } else {\n              this.setState({\n                isLoading: false\n              });\n              this.submitCreateTable({\n                language: 'ไทย',\n                number_of_guest: 1,\n                tableNumber: tableInfo.number,\n                zone: 'B1'\n              });\n            }\n          }\n        } else {\n          this.setState({\n            isLoading: false\n          });\n          console.log('Someone is useing');\n          swal({\n            icon: 'error',\n            title: 'ไม่สามารถเข้าได้',\n            text: \"\".concat(res.short_name, \" \\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E43\\u0E2B\\u0E49\\u0E1A\\u0E23\\u0E34\\u0E01\\u0E32\\u0E23\\u0E42\\u0E15\\u0E4A\\u0E30 \").concat(tableInfo.number)\n          });\n        }\n      });\n    };\n\n    this.logoutButtonClick = () => {\n      logout(this.props.user.id);\n      this.props.dispatch(clearUser());\n      this.props.history.push('/');\n    };\n\n    this.changeTableSection = section => {\n      this.setState({\n        selectedSection: section\n      });\n      const result = getTablesBySection(this.props.tables.allTables, section);\n\n      if (result !== this.props.tables.sectionTables) {\n        this.props.dispatch(setSectionTables(result));\n      }\n    };\n\n    this.submitCreateTable = ({\n      language,\n      number_of_guest,\n      tableNumber,\n      zone\n    }) => {\n      this.setState({\n        showPopup: false,\n        isLoading: true\n      });\n      updateTableStatus(tableNumber, 'on_order', this.props.user.id);\n      const info = {\n        table_number: tableNumber,\n        number_of_guest,\n        language,\n        zone,\n        create_by: this.props.user.id\n      };\n      createCustomerTable(info, data => {\n        this.props.dispatch(setSelectedTable(data));\n        getCurrentOrder(data.id, response => {\n          this.props.dispatch(setCurrentOrders(response));\n          getTableLogs(data.id, logs => {\n            this.props.dispatch(setTableLogs(logs));\n            this.props.history.push('/customer-table');\n          });\n        });\n      });\n    };\n\n    this.activeMorningShift = () => {\n      activeMorningShift(this.props.user.id, response => {\n        if (!response.status) {\n          swal({\n            icon: 'error',\n            title: 'เกิดข้อผิดพลาด',\n            text: response.msg\n          });\n        }\n      });\n    };\n\n    this.dailyReportPage = () => {\n      this.props.history.push('/daily-total-items');\n    };\n\n    this.checkerPage = () => {\n      this.props.history.push('/checker'); // getCookingFoods(data => {\n      //   this.props.dispatch(loadCookingFoodItems(data));\n      //   getCompleteFoods(data => {\n      //     this.props.dispatch(loadCompleteFoodItems(data));\n      //     this.props.history.push('/checker');\n      //   })\n      // })\n    };\n\n    this.changeShift = passcode => {\n      changeShift(this.props.user.id, passcode, this.props.tables.currentShift.period, (status, msg) => {\n        if (status) {\n          swal({\n            icon: 'success',\n            title: 'สำเร็จ',\n            text: msg\n          });\n        } else {\n          swal({\n            icon: 'error',\n            title: 'เกิดข้อผิดพลาด',\n            text: msg\n          });\n        }\n      });\n    };\n\n    this.resetTableNUser = passcode => {\n      if (passcode !== null) {\n        resetTableNUser(this.props.user.id, passcode, (status, msg) => {\n          if (status) {\n            swal({\n              icon: 'success',\n              title: 'สำเร็จ',\n              text: msg\n            });\n          } else {\n            swal({\n              icon: 'error',\n              title: 'เกิดข้อผิดพลาด',\n              text: msg\n            });\n          }\n        });\n      }\n    };\n\n    this.linkToHistoryPage = page => {\n      this.setState({\n        showPage: page\n      });\n    };\n\n    this.submitRefund = ({\n      amount,\n      remark,\n      table_id\n    }) => {\n      submitRefund({\n        amount,\n        remark,\n        table_id,\n        user_id: this.props.user.id\n      }, (status, msg) => {\n        if (status) {\n          swal({\n            icon: 'success',\n            title: 'สำเร็จ',\n            text: msg\n          });\n        } else {\n          swal({\n            icon: 'error',\n            title: 'เกิดข้อผิดพลาด',\n            text: msg\n          });\n        }\n      });\n    };\n\n    this.submitVoidPayment = table_id => {\n      submitVoidPayment(table_id, (status, msg) => {\n        if (status) {\n          swal({\n            icon: 'success',\n            title: 'สำเร็จ',\n            text: msg\n          }).then(() => {\n            getHistrotyTable(tables => {\n              this.props.dispatch(setHistoryTables(tables));\n            });\n          });\n        } else {\n          swal({\n            icon: 'error',\n            title: 'เกิดข้อผิดพลาด',\n            text: msg\n          });\n        }\n      });\n    };\n\n    this.state = {\n      currentTablePage: [],\n      showPopup: false,\n      isLoading: false,\n      selectedSection: '###',\n      somtumPrinter: '',\n      showPage: 'tables',\n      staffs: [],\n      totalCash: {\n        count: 0,\n        amount: 0\n      },\n      totalCard: {\n        count: 0,\n        amount: 0\n      },\n      totalRoom: {\n        count: 0,\n        amount: 0\n      },\n      totalTransfer: {\n        count: 0,\n        amount: 0\n      },\n      totalHalfHalf: {\n        count: 0,\n        amount: 0\n      },\n      totalThaiChana: {\n        count: 0,\n        amount: 0\n      },\n      totalGWallet: {\n        count: 0,\n        amount: 0\n      },\n      totalServiceCharge: {\n        count: 0,\n        amount: 0\n      }\n    }; //AUTHENTICATION\n\n    isAuth(this.props.user.id, data => {\n      if (data) {\n        getHistrotyTable(tables => {\n          this.props.dispatch(setHistoryTables(tables));\n        });\n        getTables(data => {\n          this.props.dispatch(loadTables(data));\n          this.props.dispatch(setSectionTables(getTablesBySection(this.props.tables.allTables, this.props.tables.allTables[0].section)));\n        });\n      } else {\n        this.props.dispatch(clearUser());\n        this.props.history.push('/');\n      }\n    });\n  }\n\n  componentDidMount() {\n    getSomtum(res => {\n      this.setState(() => ({\n        somtumPrinter: res.data.value\n      }));\n    });\n    getStaffsSale(res => {\n      if (res.status) {\n        this.setState(() => ({\n          staffs: res.staffs.sort((a, b) => b.total - a.total)\n        }));\n      }\n    });\n    getHistrotyTable(tables => {\n      this.calculateTotal(tables);\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407\n      },\n      __self: this\n    }, this.state.isLoading && React.createElement(LoadingScreen, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408\n      },\n      __self: this\n    }), this.state.showPopup && React.createElement(RegisterTablePopup, {\n      togglePopup: this.togglePopup,\n      submitCreateTable: this.submitCreateTable,\n      tableNumber: this.state.tableNumber,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410\n      },\n      __self: this\n    }), React.createElement(HeaderBar, {\n      name: this.props.user.name,\n      buttonFunction: this.logoutButtonClick,\n      buttonLabel: \"\\u0E2D\\u0E2D\\u0E01\\u0E08\\u0E32\\u0E01\\u0E23\\u0E30\\u0E1A\\u0E1A\",\n      activeMorningShift: this.activeMorningShift,\n      currentShift: this.props.tables.currentShift,\n      changeShift: this.changeShift,\n      resetTableNUser: this.resetTableNUser,\n      dailyReportPage: this.dailyReportPage,\n      checkerPage: this.checkerPage,\n      setSomtumPrinter: this.setSomtumPrinter,\n      somtumPrinter: this.state.somtumPrinter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 416\n      },\n      __self: this\n    }), this.props.tables.currentShift.status === 'active' ? React.createElement(\"div\", {\n      className: \"row fixed-content\",\n      style: {\n        background: 'black'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 432\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-3 text-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      style: {\n        color: 'white'\n      },\n      className: \"btn btn-link\",\n      onClick: () => this.linkToHistoryPage('tables'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434\n      },\n      __self: this\n    }, \"\\u0E42\\u0E15\\u0E4A\\u0E30\\u0E1B\\u0E31\\u0E08\\u0E08\\u0E38\\u0E1A\\u0E31\\u0E19\")), React.createElement(\"div\", {\n      className: \"col-sm-3 text-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      style: {\n        color: 'white'\n      },\n      className: \"btn btn-link\",\n      onClick: () => this.linkToHistoryPage('histrory'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 437\n      },\n      __self: this\n    }, \"\\u0E42\\u0E15\\u0E4A\\u0E30\\u0E17\\u0E35\\u0E48\\u0E23\\u0E31\\u0E1A\\u0E40\\u0E07\\u0E34\\u0E19\\u0E41\\u0E25\\u0E49\\u0E27\")), React.createElement(\"div\", {\n      className: \"col-sm-3 text-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 439\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      style: {\n        color: 'white'\n      },\n      className: \"btn btn-link\",\n      onClick: () => this.linkToHistoryPage('staffsSale'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 440\n      },\n      __self: this\n    }, \"\\u0E22\\u0E2D\\u0E14\\u0E23\\u0E31\\u0E1A\\u0E2D\\u0E2D\\u0E40\\u0E14\\u0E2D\\u0E23\\u0E4C\\u0E27\\u0E31\\u0E19\\u0E19\\u0E35\\u0E49\"))) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 443\n      },\n      __self: this\n    }), this.props.tables.currentShift.status === 'active' ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 447\n      },\n      __self: this\n    }, this.state.showPage === 'tables' && React.createElement(\"div\", {\n      className: \"row fixed-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451\n      },\n      __self: this\n    }, this.props.tables.allTables.map((section, index) => React.createElement(TableSection, {\n      label: section.section,\n      key: index,\n      onclick: this.changeTableSection,\n      currentShift: this.props.tables.currentShift,\n      selectedSection: this.state.selectedSection,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 453\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      style: {\n        background: '#36B6DB'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 462\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 463\n      },\n      __self: this\n    }, this.props.tables.sectionTables.map((table, index) => React.createElement(TableBox, {\n      tableInfo: table,\n      link: this.tableBoxClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465\n      },\n      __self: this\n    }))))), this.state.showPage === 'histrory' && React.createElement(\"div\", {\n      className: \"row mt-4\",\n      \"fixed-content\": true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 473\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 475\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-2 text-right sumPaymentBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 477\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 478\n      },\n      __self: this\n    }, \"\\u0E40\\u0E07\\u0E34\\u0E19\\u0E2A\\u0E14\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479\n      },\n      __self: this\n    }, numeral(this.state.totalCash.amount).format('0,0'), \" \\u0E1A\\u0E32\\u0E17\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 480\n      },\n      __self: this\n    }, this.state.totalCash.count, \" \\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\")), React.createElement(\"div\", {\n      className: \"col-2 text-right sumPaymentBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 483\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 484\n      },\n      __self: this\n    }, \"Service Charge\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 485\n      },\n      __self: this\n    }, numeral(this.state.totalServiceCharge.amount).format('0,0'), \" \\u0E1A\\u0E32\\u0E17\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 486\n      },\n      __self: this\n    }, this.state.totalServiceCharge.count, \" \\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\")), React.createElement(\"div\", {\n      className: \"col-2 text-right box1 sumPaymentBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 488\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 489\n      },\n      __self: this\n    }, \"\\u0E1A\\u0E31\\u0E15\\u0E23\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 490\n      },\n      __self: this\n    }, numeral(this.state.totalCard.amount).format('0,0'), \" \\u0E1A\\u0E32\\u0E17\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 491\n      },\n      __self: this\n    }, this.state.totalCard.count, \" \\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\")), React.createElement(\"div\", {\n      className: \"col-2 text-right box2 sumPaymentBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 493\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 494\n      },\n      __self: this\n    }, \"\\u0E2B\\u0E49\\u0E2D\\u0E07\\u0E1E\\u0E31\\u0E01\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 495\n      },\n      __self: this\n    }, numeral(this.state.totalRoom.amount).format('0,0'), \" \\u0E1A\\u0E32\\u0E17\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 496\n      },\n      __self: this\n    }, this.state.totalRoom.count, \" \\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\"))), React.createElement(\"div\", {\n      className: \"row justify-content-center my-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 499\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-2  text-right box3 sumPaymentBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 500\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 501\n      },\n      __self: this\n    }, \"\\u0E42\\u0E2D\\u0E19\\u0E40\\u0E07\\u0E34\\u0E19\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 502\n      },\n      __self: this\n    }, numeral(this.state.totalTransfer.amount).format('0,0'), \" \\u0E1A\\u0E32\\u0E17\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 503\n      },\n      __self: this\n    }, this.state.totalTransfer.count, \" \\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\")), React.createElement(\"div\", {\n      className: \"col-2  text-right box4 sumPaymentBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 505\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 506\n      },\n      __self: this\n    }, \"\\u0E04\\u0E19\\u0E25\\u0E30\\u0E04\\u0E23\\u0E36\\u0E48\\u0E07\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 507\n      },\n      __self: this\n    }, numeral(this.state.totalHalfHalf.amount).format('0,0'), \" \\u0E1A\\u0E32\\u0E17\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 508\n      },\n      __self: this\n    }, this.state.totalHalfHalf.count, \" \\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\")), React.createElement(\"div\", {\n      className: \"col-2 text-right box5 sumPaymentBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 510\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 511\n      },\n      __self: this\n    }, \"\\u0E44\\u0E17\\u0E22\\u0E0A\\u0E19\\u0E30\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512\n      },\n      __self: this\n    }, numeral(this.state.totalThaiChana.amount).format('0,0'), \" \\u0E1A\\u0E32\\u0E17\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 513\n      },\n      __self: this\n    }, this.state.totalThaiChana.count, \" \\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\")), React.createElement(\"div\", {\n      className: \"col-2 text-right box6 sumPaymentBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 515\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 516\n      },\n      __self: this\n    }, \"G-Wallet\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 517\n      },\n      __self: this\n    }, numeral(this.state.totalGWallet.amount).format('0,0'), \" \\u0E1A\\u0E32\\u0E17\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 518\n      },\n      __self: this\n    }, this.state.totalGWallet.count, \" \\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\")))), React.createElement(\"div\", {\n      className: \"col-sm-12 text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 524\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 525\n      },\n      __self: this\n    }, \"\\u0E42\\u0E15\\u0E4A\\u0E30\\u0E17\\u0E35\\u0E48\\u0E23\\u0E31\\u0E1A\\u0E40\\u0E07\\u0E34\\u0E19\\u0E41\\u0E25\\u0E49\\u0E27\")), React.createElement(\"div\", {\n      className: \"co-sm-12 mx-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 527\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table table-hover\",\n      style: {\n        width: '1200px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 528\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 529\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 530\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      style: {\n        width: '10%',\n        textAlign: 'left'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 531\n      },\n      __self: this\n    }, \"Bill No.\"), React.createElement(\"th\", {\n      style: {\n        width: '10%',\n        textAlign: 'left'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 532\n      },\n      __self: this\n    }, \"\\u0E42\\u0E15\\u0E4A\\u0E30\"), React.createElement(\"th\", {\n      style: {\n        width: '10%',\n        textAlign: 'right'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 533\n      },\n      __self: this\n    }, \"\\u0E22\\u0E2D\\u0E14\\u0E0A\\u0E33\\u0E23\\u0E30\"), React.createElement(\"th\", {\n      style: {\n        width: '10%',\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 534\n      },\n      __self: this\n    }, \"\\u0E08\\u0E48\\u0E32\\u0E22\\u0E42\\u0E14\\u0E22\"), React.createElement(\"th\", {\n      style: {\n        width: '10%',\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 535\n      },\n      __self: this\n    }, \"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E25\\u0E39\\u0E01\\u0E04\\u0E49\\u0E32\"), React.createElement(\"th\", {\n      style: {\n        width: '10%',\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 536\n      },\n      __self: this\n    }, \"\\u0E20\\u0E32\\u0E29\\u0E32\"), React.createElement(\"th\", {\n      style: {\n        width: '10%',\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 537\n      },\n      __self: this\n    }, \"\\u0E40\\u0E1B\\u0E34\\u0E14\\u0E42\\u0E15\\u0E4A\\u0E30\\u0E42\\u0E14\\u0E22\"), React.createElement(\"th\", {\n      style: {\n        width: '10%',\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 538\n      },\n      __self: this\n    }, \"\\u0E40\\u0E27\\u0E25\\u0E32\\u0E40\\u0E02\\u0E49\\u0E32\"), React.createElement(\"th\", {\n      style: {\n        width: '10%',\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 539\n      },\n      __self: this\n    }, \"\\u0E40\\u0E27\\u0E25\\u0E32\\u0E2D\\u0E2D\\u0E01\")))), this.props.tables.historyTables.tables.length !== 0 && this.props.tables.historyTables.tables.map(table => React.createElement(HistroyTableLine, {\n      id: table.id,\n      table_number: table.table_number,\n      number_of_guest: table.number_of_guest,\n      total_amount: table.total_amount,\n      short_name: table.short_name,\n      orders: table.order,\n      method: table.method,\n      language: table.language,\n      open_at: table.open_at,\n      close_at: table.close_at,\n      discount_type: table.discount_type,\n      discount_amount: table.discount_amount,\n      discount_section: table.discount_section,\n      discount_remark: table.discount_remark,\n      room_number: table.room_number,\n      submitRefund: this.submitRefund,\n      refund_amount: table.refund_amount,\n      submitVoidPayment: this.submitVoidPayment,\n      payment_id: table.payment_id,\n      multiple_payment: table.multiple_payment,\n      service_charge_amount: table.service_charge_amount,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 545\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 570\n      },\n      __self: this\n    }, \"\\u0E40\\u0E07\\u0E34\\u0E19\\u0E2A\\u0E14 : \", this.props.tables.historyTables.tables.reduce((total, i) => {\n      if (i.method === 'cash') {\n        return total + i.total_amount;\n      }\n\n      if (i.method === 'multiple') {\n        let sumPayment = i.multiple_payment.reduce((multipleTotal, eachPayment) => {\n          if (eachPayment.paymentType === 'cash') {\n            return multipleTotal + eachPayment.amount;\n          }\n\n          return multipleTotal;\n        }, 0);\n        return total + sumPayment;\n      }\n\n      return total;\n    }, 0)))), this.state.showPage === 'staffsSale' && React.createElement(\"div\", {\n      className: \"col-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 591\n      },\n      __self: this\n    }, this.state.staffs.map((x, i) => React.createElement(\"div\", {\n      className: \"row rank-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 593\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-2 rank-number\",\n      style: i == 0 ? {\n        background: '#fce545',\n        borderBottom: '5px solid red'\n      } : i == 1 ? {\n        background: '#8cc0f0',\n        borderBottom: '5px solid black'\n      } : {},\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 594\n      },\n      __self: this\n    }, i + 1), React.createElement(\"div\", {\n      className: \"col-8\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 602\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"rank-user\",\n      style: {\n        width: \"\".concat(x.total / this.state.staffs[0].total * 100, \"%\")\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 603\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 604\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 605\n      },\n      __self: this\n    }, x.total))), React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 610\n      },\n      __self: this\n    }, x.short_name)))))) : React.createElement(\"div\", {\n      className: \"row\",\n      style: {\n        marginTop: '300px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 619\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-12 text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 620\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 621\n      },\n      __self: this\n    }, \"\\u0E22\\u0E34\\u0E19\\u0E14\\u0E35\\u0E15\\u0E49\\u0E2D\\u0E19\\u0E23\\u0E31\\u0E1A\\u0E2A\\u0E39\\u0E48\\u0E23\\u0E30\\u0E1A\\u0E1A\\u0E23\\u0E49\\u0E32\\u0E19\\u0E2D\\u0E32\\u0E2B\\u0E32\\u0E23\"), React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 622\n      },\n      __self: this\n    }, \"\\u0E01\\u0E23\\u0E38\\u0E13\\u0E32\\u0E01\\u0E14\\u0E1B\\u0E38\\u0E48\\u0E21 \\\"\\u0E40\\u0E1B\\u0E34\\u0E14\\u0E23\\u0E2D\\u0E1A\\u0E40\\u0E0A\\u0E49\\u0E32\\\" \\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E40\\u0E23\\u0E34\\u0E48\\u0E34\\u0E21\\u0E01\\u0E32\\u0E23\\u0E17\\u0E33\\u0E07\\u0E32\\u0E19\"))));\n  }\n\n}\n\nconst mapStateToprops = state => {\n  return {\n    user: state.user,\n    tables: state.tables,\n    foodItems: state.foodItems\n  };\n};\n\nexport default connect(mapStateToprops)(Tables);\n\nclass HistroyTableLine extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.showOrders = () => {\n      this.setState({\n        showOrders: !this.state.showOrders\n      });\n\n      if (this.state.showOrders) {\n        this.setState({\n          showRefund: false\n        });\n      }\n    };\n\n    this.amountOnChange = e => {\n      const input = e.target.value;\n      var isMatch = parseInt(input) <= this.props.total_amount - this.props.refund_amount && parseInt(input) > 0 ? true : false;\n      console.log(input);\n\n      if (!input || isMatch) {\n        this.setState({\n          amount: input\n        });\n      }\n    };\n\n    this.submitVoidPayment = () => {\n      swal({\n        title: \"\\u0E04\\u0E38\\u0E13\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E32\\u0E23\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\\u0E01\\u0E32\\u0E23\\u0E08\\u0E48\\u0E32\\u0E22\\u0E40\\u0E07\\u0E34\\u0E19\\u0E02\\u0E2D\\u0E07\\u0E42\\u0E15\\u0E4A\\u0E30 \".concat(this.props.table_number, \" ?\"),\n        buttons: {\n          cancel: \"ปิด\",\n          confirm: \"ยืนยัน\"\n        }\n      }).then(data => {\n        if (data) {\n          this.props.submitVoidPayment(this.props.id);\n        }\n      });\n      console.log(this.props);\n    };\n\n    this.submitRefund = () => {\n      if (this.state.remark) {\n        this.props.submitRefund({\n          amount: this.state.amount,\n          remark: this.state.remark,\n          table_id: this.props.id\n        });\n        this.setState({\n          showOrders: false,\n          showRefund: false,\n          amount: '',\n          remark: ''\n        });\n      }\n    };\n\n    this.remarkOnChange = e => {\n      const input = e.target.value.trim();\n      this.setState({\n        remark: input\n      });\n    };\n\n    this.state = {\n      showOrders: false,\n      showRefund: false,\n      amount: '',\n      remark: ''\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      style: {\n        marginTop: '-15px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 712\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table table-hover mt-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 713\n      },\n      __self: this\n    }, React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 714\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      onClick: () => this.showOrders(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 715\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      style: {\n        textAlign: 'left',\n        width: '10%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 716\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 716\n      },\n      __self: this\n    }, this.props.payment_id)), React.createElement(\"td\", {\n      style: {\n        textAlign: 'left',\n        width: '10%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 717\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 717\n      },\n      __self: this\n    }, this.props.table_number)), React.createElement(\"td\", {\n      style: {\n        textAlign: 'right',\n        width: '10%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 718\n      },\n      __self: this\n    }, formatNumber(this.props.total_amount), \".-\"), React.createElement(\"td\", {\n      style: {\n        textAlign: 'center',\n        width: '10%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 719\n      },\n      __self: this\n    }, this.props.method === 'cash' ? 'เงินสด' : this.props.method === 'card' ? 'บัตร' : this.props.method === 'transfer' ? 'โอนเงิน' : this.props.method === 'room' ? 'ย้ายเข้าบัญชีห้องพัก' : this.props.method === 'multiple' ? 'แบ่งจ่าย' : 'complimentary'), React.createElement(\"td\", {\n      style: {\n        textAlign: 'left',\n        width: '10%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 726\n      },\n      __self: this\n    }, this.props.number_of_guest), React.createElement(\"td\", {\n      style: {\n        textAlign: 'left',\n        width: '10%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 727\n      },\n      __self: this\n    }, this.props.language), React.createElement(\"td\", {\n      style: {\n        textAlign: 'left',\n        width: '10%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 728\n      },\n      __self: this\n    }, this.props.short_name), React.createElement(\"td\", {\n      style: {\n        textAlign: 'left',\n        width: '10%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 729\n      },\n      __self: this\n    }, moment(this.props.open_at).format('HH:mm')), React.createElement(\"td\", {\n      style: {\n        textAlign: 'left',\n        width: '10%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 730\n      },\n      __self: this\n    }, moment(this.props.close_at).format('HH:mm'))))), this.state.showOrders && React.createElement(\"table\", {\n      class: \"table table-borderless\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 735\n      },\n      __self: this\n    }, React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 736\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 737\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      colSpan: \"9\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 738\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 739\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"text-left col-sm-5 pl-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 740\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 741\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 741\n      },\n      __self: this\n    }, \"\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E2D\\u0E32\\u0E2B\\u0E32\\u0E23:\")), this.props.orders.map(order => React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 743\n      },\n      __self: this\n    }, order.quantity, \" x \", order.name))), React.createElement(\"div\", {\n      className: \"text-left col-sm-4 pl-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 746\n      },\n      __self: this\n    }, this.props.method === \"room\" && React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 747\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 747\n      },\n      __self: this\n    }, \"\\u0E2B\\u0E21\\u0E32\\u0E22\\u0E40\\u0E25\\u0E02\\u0E2B\\u0E49\\u0E2D\\u0E07\\u0E1E\\u0E31\\u0E01: \"), this.props.room_number), this.props.method === \"transfer\" && React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 748\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 748\n      },\n      __self: this\n    }, \"\\u0E2B\\u0E21\\u0E32\\u0E22\\u0E40\\u0E25\\u0E02\\u0E01\\u0E32\\u0E23\\u0E42\\u0E2D\\u0E19: \"), this.props.room_number), this.props.method === \"multiple\" && React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 749\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 749\n      },\n      __self: this\n    }, \"\\u0E41\\u0E1A\\u0E48\\u0E07\\u0E08\\u0E48\\u0E32\\u0E22:\")), this.props.method === \"multiple\" && this.props.multiple_payment.map(p => {\n      let type = p.paymentType === 'cash' ? 'เงินสด' : p.paymentType === 'creditCard' ? 'บัตร' : p.paymentType === 'halfHalf' ? 'คนละครึ่ง' : p.paymentType === 'G-Wallet' ? 'G-Wallet' : 'ไทยชนะ';\n      return React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 755\n        },\n        __self: this\n      }, type, \": \", formatNumber(p.amount), \".- \", p.paymentType !== 'cash' && \"|| \".concat(p.reference));\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 757\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 757\n      },\n      __self: this\n    }, \"\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E25\\u0E14: \"), this.props.discount_type !== undefined ? this.props.discount_type === 'percentage' ? \"\".concat(this.props.discount_amount, \"% \").concat(this.props.discount_section === 'f&b' ? 'อาหารและเครื่องดื่ม' : this.props.discount_section === 'b' ? 'เฉพาะเครื่องดื่ม' : 'เฉพาะอาหาร') : this.props.discount_type === 'amount' ? \"\\u0E21\\u0E39\\u0E25\\u0E04\\u0E48\\u0E32\".concat(this.props.discount_amount, \" \\u0E1A\\u0E32\\u0E17\") : 'โต๊ะ complimentary' : '-'), this.props.discount_type === 'complimentary' && React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 766\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 766\n      },\n      __self: this\n    }, \"\\u0E2B\\u0E21\\u0E32\\u0E22\\u0E40\\u0E2B\\u0E15\\u0E39: \"), this.props.discount_remark), this.props.service_charge_amount > 0 ? React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 767\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 767\n      },\n      __self: this\n    }, \"Service Charge: \"), formatNumber(this.props.service_charge_amount), \" \\u0E1A\\u0E32\\u0E17\") : ''), React.createElement(\"div\", {\n      className: \"text-left col-sm-3 pl-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 769\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-danger\",\n      onClick: () => this.submitVoidPayment(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 770\n      },\n      __self: this\n    }, \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\\u0E01\\u0E32\\u0E23\\u0E08\\u0E48\\u0E32\\u0E22\\u0E40\\u0E07\\u0E34\\u0E19\"), this.state.showRefund && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 772\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"input-group mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 773\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 774\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"input-group-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 775\n      },\n      __self: this\n    }, \"\\u0E2B\\u0E21\\u0E32\\u0E22\\u0E40\\u0E2B\\u0E15\\u0E38\")), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      value: this.state.remark,\n      onChange: this.remarkOnChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 777\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      class: \"input-group mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 779\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 780\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"input-group-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 781\n      },\n      __self: this\n    }, \"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E40\\u0E07\\u0E34\\u0E19\")), React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.amount,\n      className: \"form-control\",\n      onChange: this.amountOnChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 783\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      onClick: () => this.submitRefund(),\n      className: \"btn btn-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 785\n      },\n      __self: this\n    }, \"\\u0E22\\u0E37\\u0E19\\u0E22\\u0E31\\u0E19\")))))))));\n  }\n\n}\n\nclass TableSection extends React.Component {\n  render() {\n    const style = {\n      margin: '0px -30px 0px 100px',\n      cursor: 'pointer',\n      background: this.props.selectedSection === this.props.label ? '#36B6DB' : 'white',\n      borderRadius: '5px',\n      border: '2px solid #36B6DB',\n      height: '80px',\n      color: this.props.selectedSection === this.props.label ? 'white' : 'black'\n    };\n    return React.createElement(\"div\", {\n      className: \"row tableSection\",\n      style: style,\n      onClick: () => this.props.onclick(this.props.label),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 811\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-12 text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 816\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"mt-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 817\n      },\n      __self: this\n    }, this.props.label)));\n  }\n\n}\n\nconst TableBox = props => {\n  const style = {\n    background: props.tableInfo.status === 'opened' ? '#5291ff' : props.tableInfo.status === 'checked' ? '#C82333' : 'white'\n  };\n  const time = moment(props.tableInfo.timestamp);\n  return React.createElement(\"div\", {\n    className: \"col-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 833\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 834\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"tableBox\",\n    style: style,\n    onClick: () => props.link(props.tableInfo),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 835\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    style: {\n      color: 'black'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 840\n    },\n    __self: this\n  }, props.tableInfo.number), props.tableInfo.status === null ? '' : React.createElement(\"p\", {\n    style: {\n      color: 'black'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 844\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 845\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    alt: \"Number of customer\",\n    src: peopleIcon,\n    width: \"20px\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 846\n    },\n    __self: this\n  })), ' ', \"x \", props.tableInfo.number_of_guest, \" | Zone: \", props.tableInfo.zone, React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 849\n    },\n    __self: this\n  }), \" \", time.format('hh:mm A')))));\n};","map":{"version":3,"sources":["/home/olotem321/jep-cashier-2021-2/src/screens/Tables.js"],"names":["React","connect","swal","clearUser","loadTables","setSectionTables","setHistoryTables","setSelectedTable","setCurrentOrders","setTableLogs","loadCookingFoodItems","loadCompleteFoodItems","getCookingFoods","getCompleteFoods","getTablesBySection","LoadingScreen","HeaderBar","TopBuffer","RegisterTablePopup","getTables","isTableOnHold","updateTableStatus","activeMorningShift","changeShift","getHistrotyTable","submitRefund","getSomtum","changeSomtum","getStaffsSale","isAuth","getCurrentOrder","createCustomerTable","getTableLogs","submitVoidPayment","logout","resetTableNUser","formatNumber","numeral","moment","require","Tables","Component","constructor","props","calculateTotal","input","cash","count","amount","card","room","transfer","halfHalf","ThaiChana","GWallet","serviceCharge","tables","undefined","forEach","x","console","log","service_charge_amount","method","total_amount","multiple_payment","y","paymentType","setState","totalCash","totalCard","totalTransfer","totalRoom","totalHalfHalf","totalThaiChana","totalGWallet","totalServiceCharge","setSomtumPrinter","res","somtumPrinter","data","value","togglePopup","tableNumber","state","showPopup","tableBoxClick","tableInfo","isLoading","number","status","id","user","dispatch","response","logs","history","push","outlet","submitCreateTable","language","number_of_guest","zone","icon","title","text","short_name","logoutButtonClick","changeTableSection","section","selectedSection","result","allTables","sectionTables","info","table_number","create_by","msg","dailyReportPage","checkerPage","passcode","currentShift","period","linkToHistoryPage","page","showPage","remark","table_id","user_id","then","currentTablePage","staffs","componentDidMount","sort","a","b","total","render","name","background","color","map","index","table","format","width","textAlign","historyTables","length","order","open_at","close_at","discount_type","discount_amount","discount_section","discount_remark","room_number","refund_amount","payment_id","reduce","i","sumPayment","multipleTotal","eachPayment","borderBottom","marginTop","mapStateToprops","foodItems","HistroyTableLine","showOrders","showRefund","amountOnChange","e","target","isMatch","parseInt","buttons","cancel","confirm","remarkOnChange","trim","orders","quantity","p","type","reference","TableSection","style","margin","cursor","label","borderRadius","border","height","onclick","TableBox","time","timestamp","link","peopleIcon"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport swal from 'sweetalert';\r\n\r\nimport peopleIcon from './../assets/icons/people.svg';\r\nimport {clearUser} from './../Redux/actions/user';\r\nimport {loadTables, setSectionTables, setHistoryTables} from './../Redux/actions/tables';\r\nimport {\r\n  setSelectedTable,\r\n  setCurrentOrders,\r\n  setTableLogs\r\n} from './../Redux/actions/customerTable';\r\nimport {loadCookingFoodItems, loadCompleteFoodItems} from './../Redux/actions/foodItems';\r\nimport {getCookingFoods, getCompleteFoods} from './../brains/foodItems';\r\n\r\n\r\nimport {getTablesBySection} from './../Redux/selectors/tables';\r\nimport LoadingScreen from '../components/LoadingScreen';\r\nimport {HeaderBar} from './../components/HeaderBar';\r\nimport {TopBuffer} from '../helpers/utilities';\r\nimport RegisterTablePopup from './../components/RegisterTable'\r\n\r\nimport {getTables, isTableOnHold, updateTableStatus, activeMorningShift, changeShift, getHistrotyTable, submitRefund, getSomtum, changeSomtum, getStaffsSale} from './../brains/tables';\r\nimport {isAuth} from './../brains/authentication';\r\nimport {\r\n  getCurrentOrder,\r\n  createCustomerTable,\r\n  getTableLogs,\r\n  submitVoidPayment\r\n} from './../brains/customerTable';\r\nimport {logout, resetTableNUser} from '../brains/user';\r\n\r\n\r\nimport { formatNumber } from './../helpers/utilities';\r\n\r\nimport numeral from 'numeral'\r\n\r\nimport './Tables.css';\r\n\r\nvar moment = require('moment');\r\n\r\nclass Tables extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      currentTablePage: [],\r\n      showPopup: false,\r\n      isLoading: false,\r\n      selectedSection: '###',\r\n    somtumPrinter:'',\r\n        showPage: 'tables',\r\n        staffs: [],\r\n        totalCash: {count: 0, amount: 0},\r\n        totalCard: {count: 0, amount: 0},\r\n        totalRoom: {count: 0, amount: 0},\r\n        totalTransfer: {count: 0, amount: 0},\r\n        totalHalfHalf: {count: 0, amount: 0},\r\n        totalThaiChana: {count: 0, amount: 0},\r\n        totalGWallet: {count: 0, amount: 0},\r\n        totalServiceCharge: {count: 0, amount: 0},\r\n    };\r\n    //AUTHENTICATION\r\n    isAuth(this.props.user.id, data => {\r\n      if (data) {\r\n        getHistrotyTable(tables => {\r\n          this.props.dispatch(setHistoryTables(tables))\r\n\r\n        })\r\n        getTables(data => {\r\n          this.props.dispatch(loadTables(data));\r\n          this.props.dispatch(\r\n            setSectionTables(\r\n              getTablesBySection(\r\n                this.props.tables.allTables,\r\n                this.props.tables.allTables[0].section\r\n              )\r\n            )\r\n          );\r\n        });\r\n      } else {\r\n        this.props.dispatch(clearUser());\r\n        this.props.history.push('/');\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  calculateTotal = input => {\r\n    let cash = {count: 0, amount: 0}\r\n    let card = {count: 0, amount: 0}\r\n    let room = {count: 0, amount: 0}\r\n    let transfer = {count: 0, amount: 0}\r\n    let halfHalf = {count: 0, amount: 0}\r\n    let ThaiChana = {count: 0, amount: 0}\r\n    let GWallet = {count: 0, amount: 0}\r\n    let serviceCharge = {count: 0, amount: 0}\r\n    if(input.tables !== undefined){\r\n      input.tables.forEach(x => {\r\n        console.log(cash.amount);\r\n        console.log(x);\r\n\r\n        if(x.service_charge_amount > 0){\r\n          serviceCharge['count'] += 1\r\n          serviceCharge['amount'] += x.service_charge_amount\r\n        }\r\n        if(x.method === 'cash'){\r\n          cash['count'] += 1\r\n          cash['amount'] += x.total_amount\r\n        }\r\n        if(x.method === 'card'){\r\n          card['count'] += 1\r\n          card['amount'] += x.total_amount\r\n        }\r\n        if(x.method === 'transfer'){\r\n          transfer['count'] += 1\r\n          transfer['amount'] += x.total_amount\r\n        }\r\n        if(x.method === 'room'){\r\n          room['count'] += 1\r\n          room['amount'] += x.total_amount\r\n        }\r\n        if(x.method === 'multiple'){\r\n          x.multiple_payment.forEach(y => {\r\n            if(y.paymentType === 'cash'){\r\n              cash['count'] += 1\r\n              cash['amount'] += y.amount\r\n            }\r\n            if(y.paymentType === 'creditCard'){\r\n              card['count'] += 1\r\n              card['amount'] += y.amount\r\n            }\r\n            if(y.paymentType === 'halfHalf'){\r\n              halfHalf['count'] += 1\r\n              halfHalf['amount'] += y.amount\r\n            }\r\n            if(y.paymentType === 'transfer'){\r\n              transfer['count'] += 1\r\n              transfer['amount'] += y.amount\r\n            }\r\n            if(y.paymentType === 'ThaiChana'){\r\n              ThaiChana['count'] += 1\r\n              ThaiChana['amount'] += y.amount\r\n            }\r\n            if(y.paymentType === 'G-Wallet'){\r\n              GWallet['count'] += 1\r\n              GWallet['amount'] += y.amount\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n    console.log(cash);\r\n    this.setState(() => ({\r\n      totalCash: cash,\r\n      totalCard: card,\r\n      totalTransfer: transfer,\r\n      totalRoom: room,\r\n      totalHalfHalf: halfHalf,\r\n      totalThaiChana: ThaiChana,\r\n      totalGWallet: GWallet,\r\n      totalServiceCharge: serviceCharge\r\n    }))\r\n  }\r\n\r\n    componentDidMount(){\r\n         getSomtum(res => {\r\n            this.setState(() => ({\r\n                somtumPrinter: res.data.value\r\n            }))\r\n        })\r\n\r\n        getStaffsSale(res => {\r\n            if(res.status){\r\n                this.setState(() => ({\r\n                    staffs: res.staffs.sort((a, b) => b.total - a.total)\r\n                }))\r\n            }\r\n        })\r\n\r\n        getHistrotyTable(tables => {\r\n          this.calculateTotal(tables)\r\n        })\r\n    }\r\n\r\n\r\n    setSomtumPrinter = () =>{\r\n        changeSomtum(res => {\r\n            this.setState(() => ({\r\n                somtumPrinter: res.data.value\r\n            }))\r\n        })\r\n    }\r\n\r\n  togglePopup = tableNumber => {\r\n    if (this.state.showPopup) {\r\n      console.log('Update statu to available');\r\n      updateTableStatus(this.state.tableNumber, 'available', '');\r\n    }\r\n    this.setState(state => ({\r\n      tableNumber,\r\n      showPopup: !state.showPopup\r\n    }));\r\n  };\r\n  tableBoxClick = tableInfo => {\r\n    this.setState({\r\n      isLoading: true\r\n    })\r\n    isTableOnHold(tableInfo.number, res => {\r\n      if (res.status === 'available') {\r\n        if (tableInfo.id !== null) {\r\n          updateTableStatus(tableInfo.number, 'on_order', this.props.user.id);\r\n          this.props.dispatch(setSelectedTable(tableInfo));\r\n          getCurrentOrder(tableInfo.id, response => {\r\n            this.props.dispatch(setCurrentOrders(response));\r\n            getTableLogs(tableInfo.id, logs => {\r\n              this.props.dispatch(setTableLogs(logs));\r\n              this.props.history.push('/customer-table');\r\n            });\r\n          });\r\n        } else {\r\n          console.log('Tabble Info: ', tableInfo);\r\n          if(tableInfo.outlet === 'customer'){\r\n            this.setState({\r\n              isLoading: false\r\n            })\r\n            updateTableStatus(tableInfo.number, 'on_create', this.props.user.id);\r\n            this.togglePopup(tableInfo.number);\r\n          }else{\r\n            this.setState({\r\n              isLoading: false\r\n            });\r\n            this.submitCreateTable({\r\n              language: 'ไทย',\r\n              number_of_guest: 1,\r\n              tableNumber: tableInfo.number,\r\n              zone: 'B1'\r\n            });\r\n          }\r\n        }\r\n      } else {\r\n        this.setState({\r\n          isLoading: false\r\n        })\r\n        console.log('Someone is useing');\r\n        swal({\r\n          icon: 'error',\r\n          title: 'ไม่สามารถเข้าได้',\r\n          text: `${res.short_name} กำลังให้บริการโต๊ะ ${tableInfo.number}`\r\n        });\r\n      }\r\n    });\r\n  };\r\n  logoutButtonClick = () => {\r\n    logout(this.props.user.id);\r\n    this.props.dispatch(clearUser());\r\n    this.props.history.push('/');\r\n  };\r\n  changeTableSection = section => {\r\n    this.setState({\r\n      selectedSection: section\r\n    });\r\n    const result = getTablesBySection(this.props.tables.allTables, section);\r\n    if (result !== this.props.tables.sectionTables) {\r\n      this.props.dispatch(setSectionTables(result));\r\n    }\r\n  };\r\n  submitCreateTable = ({language, number_of_guest, tableNumber, zone}) => {\r\n    this.setState({\r\n      showPopup: false,\r\n      isLoading: true\r\n    })\r\n    updateTableStatus(tableNumber, 'on_order', this.props.user.id);\r\n    const info = {\r\n      table_number: tableNumber,\r\n      number_of_guest,\r\n      language,\r\n      zone,\r\n      create_by: this.props.user.id\r\n    };\r\n    createCustomerTable(info, data => {\r\n      this.props.dispatch(setSelectedTable(data));\r\n      getCurrentOrder(data.id, response => {\r\n        this.props.dispatch(setCurrentOrders(response));\r\n        getTableLogs(data.id, logs => {\r\n          this.props.dispatch(setTableLogs(logs));\r\n          this.props.history.push('/customer-table');\r\n        });\r\n      });\r\n    });\r\n  };\r\n\r\n\r\n  activeMorningShift = () => {\r\n    activeMorningShift(this.props.user.id, (response) => {\r\n      if(!response.status){\r\n        swal({\r\n          icon: 'error',\r\n          title: 'เกิดข้อผิดพลาด',\r\n          text: response.msg\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  dailyReportPage = () => {\r\n    this.props.history.push('/daily-total-items');\r\n  }\r\n\r\n  checkerPage = () => {\r\n\r\nthis.props.history.push('/checker');\r\n    // getCookingFoods(data => {\r\n    //   this.props.dispatch(loadCookingFoodItems(data));\r\n    //   getCompleteFoods(data => {\r\n    //     this.props.dispatch(loadCompleteFoodItems(data));\r\n    //     this.props.history.push('/checker');\r\n    //   })\r\n    // })\r\n  }\r\n\r\n  changeShift = (passcode) => {\r\n    changeShift(this.props.user.id, passcode, this.props.tables.currentShift.period, (status, msg) => {\r\n      if(status){\r\n        swal({\r\n          icon: 'success',\r\n          title: 'สำเร็จ',\r\n          text: msg\r\n        });\r\n      }else{\r\n        swal({\r\n          icon: 'error',\r\n          title: 'เกิดข้อผิดพลาด',\r\n          text: msg\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  resetTableNUser = (passcode) => {\r\n    if(passcode !== null){\r\n      resetTableNUser(this.props.user.id, passcode, (status, msg) => {\r\n        if(status){\r\n          swal({\r\n            icon: 'success',\r\n            title: 'สำเร็จ',\r\n            text: msg\r\n          });\r\n        }else{\r\n          swal({\r\n            icon: 'error',\r\n            title: 'เกิดข้อผิดพลาด',\r\n            text: msg\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  linkToHistoryPage = (page) => {\r\n    this.setState({\r\n      showPage: page\r\n    })\r\n  }\r\n\r\n  submitRefund = ({amount, remark, table_id}) => {\r\n    submitRefund({amount, remark, table_id, user_id: this.props.user.id}, (status, msg) => {\r\n      if(status){\r\n        swal({\r\n          icon: 'success',\r\n          title: 'สำเร็จ',\r\n          text: msg\r\n        });\r\n      }else{\r\n        swal({\r\n          icon: 'error',\r\n          title: 'เกิดข้อผิดพลาด',\r\n          text: msg\r\n        });\r\n      }\r\n    })\r\n  }\r\n\r\n  submitVoidPayment = (table_id) => {\r\n    submitVoidPayment(table_id, (status, msg) => {\r\n      if(status){\r\n        swal({\r\n          icon: 'success',\r\n          title: 'สำเร็จ',\r\n          text: msg\r\n        }).then(() => {\r\n          getHistrotyTable(tables => {\r\n            this.props.dispatch(setHistoryTables(tables))\r\n          })\r\n        });\r\n      }else{\r\n        swal({\r\n          icon: 'error',\r\n          title: 'เกิดข้อผิดพลาด',\r\n          text: msg\r\n        });\r\n      }\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container-fluid\" >\r\n        { this.state.isLoading && <LoadingScreen /> }\r\n        {this.state.showPopup && (\r\n          <RegisterTablePopup\r\n            togglePopup={this.togglePopup}\r\n            submitCreateTable={this.submitCreateTable}\r\n            tableNumber={this.state.tableNumber}\r\n          />\r\n        )}\r\n        <HeaderBar\r\n          name={this.props.user.name}\r\n          buttonFunction={this.logoutButtonClick}\r\n          buttonLabel=\"ออกจากระบบ\"\r\n          activeMorningShift={this.activeMorningShift}\r\n          currentShift={this.props.tables.currentShift}\r\n          changeShift={this.changeShift}\r\n          resetTableNUser={this.resetTableNUser}\r\n          dailyReportPage={this.dailyReportPage}\r\n          checkerPage={this.checkerPage}\r\n            setSomtumPrinter={this.setSomtumPrinter}\r\n            somtumPrinter={this.state.somtumPrinter}\r\n\r\n\r\n        />\r\n        {this.props.tables.currentShift.status === 'active'?\r\n          <div className=\"row fixed-content\" style={{background: 'black'}}>\r\n              <div className=\"col-sm-3 text-right\">\r\n                <button style={{color: 'white'}} className=\"btn btn-link\" onClick={() => this.linkToHistoryPage('tables')}>โต๊ะปัจจุบัน</button>\r\n              </div>\r\n              <div className=\"col-sm-3 text-right\">\r\n                <button style={{color: 'white'}} className=\"btn btn-link\" onClick={() => this.linkToHistoryPage('histrory')}>โต๊ะที่รับเงินแล้ว</button>\r\n              </div>\r\n            <div className=\"col-sm-3 text-right\">\r\n                <button style={{color: 'white'}} className=\"btn btn-link\" onClick={() => this.linkToHistoryPage('staffsSale')}>ยอดรับออเดอร์วันนี้</button>\r\n              </div>\r\n          </div>:\r\n          <div></div>\r\n        }\r\n        {\r\n          this.props.tables.currentShift.status === 'active' ?\r\n              <div>\r\n              {\r\n                      this.state.showPage === 'tables' &&\r\n          <div className=\"row fixed-content\">\r\n            <div className=\"col-sm-2\">\r\n              {this.props.tables.allTables.map((section, index) => (\r\n                <TableSection\r\n                  label={section.section}\r\n                  key={index}\r\n                  onclick={this.changeTableSection}\r\n                  currentShift={this.props.tables.currentShift}\r\n                  selectedSection={this.state.selectedSection}\r\n                />\r\n              ))}\r\n            </div>\r\n            <div className=\"col-sm-10\" style={{background: '#36B6DB'}}>\r\n              <div className=\"row\">\r\n                {this.props.tables.sectionTables.map((table, index) => (\r\n                  <TableBox tableInfo={table} link={this.tableBoxClick} />\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n                          }\r\n          {\r\n                      this.state.showPage === 'histrory' &&\r\n                          <div className=\"row mt-4\" fixed-content>\r\n\r\n          <div className=\"col-12\">\r\n            <div className=\"row justify-content-center\">\r\n              <div className=\"col-2 text-right sumPaymentBox\">\r\n                <h4>เงินสด</h4>\r\n              <p >{numeral(this.state.totalCash.amount).format('0,0')} บาท</p>\r\n            <p>{this.state.totalCash.count} รายการ</p>\r\n              </div>\r\n\r\n              <div className=\"col-2 text-right sumPaymentBox\">\r\n                <h4>Service Charge</h4>\r\n              <p >{numeral(this.state.totalServiceCharge.amount).format('0,0')} บาท</p>\r\n            <p>{this.state.totalServiceCharge.count} รายการ</p>\r\n              </div>\r\n              <div className=\"col-2 text-right box1 sumPaymentBox\">\r\n                <h4>บัตร</h4>\r\n              <p>{numeral(this.state.totalCard.amount).format('0,0')} บาท</p>\r\n            <p>{this.state.totalCard.count} รายการ</p>\r\n              </div>\r\n              <div className=\"col-2 text-right box2 sumPaymentBox\">\r\n                <h4>ห้องพัก</h4>\r\n              <p>{numeral(this.state.totalRoom.amount).format('0,0')} บาท</p>\r\n            <p>{this.state.totalRoom.count} รายการ</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"row justify-content-center my-3\">\r\n              <div className=\"col-2  text-right box3 sumPaymentBox\">\r\n                <h4>โอนเงิน</h4>\r\n              <p >{numeral(this.state.totalTransfer.amount).format('0,0')} บาท</p>\r\n            <p>{this.state.totalTransfer.count} รายการ</p>\r\n              </div>\r\n              <div className=\"col-2  text-right box4 sumPaymentBox\">\r\n                <h4>คนละครึ่ง</h4>\r\n              <p >{numeral(this.state.totalHalfHalf.amount).format('0,0')} บาท</p>\r\n            <p>{this.state.totalHalfHalf.count} รายการ</p>\r\n              </div>\r\n              <div className=\"col-2 text-right box5 sumPaymentBox\">\r\n                <h4>ไทยชนะ</h4>\r\n              <p >{numeral(this.state.totalThaiChana.amount).format('0,0')} บาท</p>\r\n            <p>{this.state.totalThaiChana.count} รายการ</p>\r\n              </div>\r\n              <div className=\"col-2 text-right box6 sumPaymentBox\">\r\n                <h4>G-Wallet</h4>\r\n              <p >{numeral(this.state.totalGWallet.amount).format('0,0')} บาท</p>\r\n            <p>{this.state.totalGWallet.count} รายการ</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n\r\n            <div className=\"col-sm-12 text-center\">\r\n              <h4>โต๊ะที่รับเงินแล้ว</h4>\r\n            </div>\r\n            <div className=\"co-sm-12 mx-auto\">\r\n              <table className=\"table table-hover\" style={{width: '1200px'}}>\r\n                <thead>\r\n                    <tr>\r\n                      <th style={{ width: '10%', textAlign: 'left'}}>Bill No.</th>\r\n                      <th style={{ width: '10%', textAlign: 'left'}}>โต๊ะ</th>\r\n                      <th style={{ width: '10%', textAlign: 'right'}}>ยอดชำระ</th>\r\n                    <th style={{ width: '10%', textAlign: 'center'}}>จ่ายโดย</th>\r\n                      <th style={{ width: '10%', textAlign: 'center'}}>จำนวนลูกค้า</th>\r\n                      <th style={{ width: '10%', textAlign: 'center'}}>ภาษา</th>\r\n                      <th style={{ width: '10%', textAlign: 'center'}}>เปิดโต๊ะโดย</th>\r\n                      <th style={{ width: '10%', textAlign: 'center'}}>เวลาเข้า</th>\r\n                      <th style={{ width: '10%', textAlign: 'center'}}>เวลาออก</th>\r\n                    </tr>\r\n                </thead>\r\n              </table>\r\n              {\r\n                this.props.tables.historyTables.tables.length !== 0 && this.props.tables.historyTables.tables.map( table => (\r\n                  <HistroyTableLine\r\n                    id={table.id}\r\n                    table_number={table.table_number}\r\n                    number_of_guest={table.number_of_guest}\r\n                    total_amount={table.total_amount}\r\n                    short_name={table.short_name}\r\n                    orders={table.order}\r\n                    method={table.method}\r\n                    language={table.language}\r\n                    open_at={table.open_at}\r\n                    close_at={table.close_at}\r\n                    discount_type={table.discount_type}\r\n                    discount_amount={table.discount_amount}\r\n                    discount_section={table.discount_section}\r\n                    discount_remark={table.discount_remark}\r\n                    room_number={table.room_number}\r\n                    submitRefund={this.submitRefund}\r\n                    refund_amount={table.refund_amount}\r\n                    submitVoidPayment={this.submitVoidPayment}\r\n                    payment_id={table.payment_id}\r\n                    multiple_payment={table.multiple_payment}\r\n                    service_charge_amount={table.service_charge_amount}\r\n                  />\r\n                ))\r\n              }\r\n              <div>\r\n                เงินสด : {this.props.tables.historyTables.tables.reduce((total, i) => {\r\n                  if(i.method === 'cash'){\r\n                    return total+i.total_amount\r\n                  }\r\n                  if(i.method === 'multiple'){\r\n                    let sumPayment = i.multiple_payment.reduce((multipleTotal, eachPayment) => {\r\n                      if(eachPayment.paymentType === 'cash'){\r\n                        return multipleTotal + eachPayment.amount\r\n                      }\r\n                      return multipleTotal\r\n                    }, 0)\r\n                    return total + sumPayment\r\n                  }\r\n                  return total\r\n                }, 0)}\r\n              </div>\r\n            </div>\r\n          </div>\r\n                  }\r\n                  { this.state.showPage === 'staffsSale' &&\r\n                    <div className=\"col-12\">\r\n          {this.state.staffs.map((x, i) => (\r\n            <div className=\"row rank-container\">\r\n              <div className=\"col-2 rank-number\" style={\r\n                  i == 0 ? {background: '#fce545', borderBottom: '5px solid red'}\r\n                  : i == 1 ? {background: '#8cc0f0', borderBottom: '5px solid black'}\r\n                  : {}\r\n\r\n                }>\r\n                {i+1}\r\n              </div>\r\n              <div className=\"col-8\">\r\n                <div className=\"rank-user\" style={{width: `${x.total/this.state.staffs[0].total*100}%`}}>\r\n                <div className=\"row\">\r\n                  <div className=\"col-12\">\r\n                    {x.total}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n                  <b>{x.short_name}</b>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n                  }\r\n\r\n              </div>\r\n          :\r\n          <div className=\"row\" style={{marginTop:'300px'}}>\r\n            <div className=\"col-sm-12 text-center\">\r\n              <h3>ยินดีต้อนรับสู่ระบบร้านอาหาร</h3>\r\n              <h5>กรุณากดปุ่ม \"เปิดรอบเช้า\" เพื่อเริ่ิมการทำงาน</h5>\r\n            </div>\r\n          </div>\r\n        }\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToprops = state => {\r\n  return {\r\n    user: state.user,\r\n    tables: state.tables,\r\n    foodItems: state.foodItems\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToprops)(Tables);\r\n\r\nclass HistroyTableLine extends React.Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      showOrders: false,\r\n      showRefund: false,\r\n      amount: '',\r\n      remark: ''\r\n    }\r\n  }\r\n  showOrders = () => {\r\n    this.setState({\r\n      showOrders: !this.state.showOrders\r\n    });\r\n    if(this.state.showOrders){\r\n      this.setState({showRefund: false});\r\n    }\r\n  }\r\n\r\n  amountOnChange = (e) => {\r\n    const input = e.target.value;\r\n    var isMatch = parseInt(input) <= (this.props.total_amount-this.props.refund_amount) && parseInt(input) > 0 ? true : false;\r\n    console.log(input);\r\n    if(!input || isMatch){\r\n      this.setState({\r\n        amount: input\r\n      })\r\n    }\r\n  }\r\n\r\n  submitVoidPayment = () => {\r\n    swal({\r\n      title:  `คุณต้องการยกเลิกการจ่ายเงินของโต๊ะ ${this.props.table_number} ?`,\r\n      buttons: {\r\n        cancel: \"ปิด\",\r\n        confirm: \"ยืนยัน\",\r\n        }\r\n    }).then((data) => {\r\n      if(data){\r\n        this.props.submitVoidPayment(this.props.id);\r\n      }\r\n    });\r\n    console.log(this.props);\r\n  }\r\n\r\n  submitRefund = () => {\r\n    if(this.state.remark){\r\n    this.props.submitRefund({\r\n      amount: this.state.amount,\r\n      remark: this.state.remark,\r\n      table_id: this.props.id\r\n    });\r\n    this.setState({\r\n      showOrders: false,\r\n      showRefund: false,\r\n      amount: '',\r\n      remark: ''\r\n    });\r\n    }\r\n  }\r\n\r\n  remarkOnChange = (e) => {\r\n    const input = e.target.value.trim();\r\n    this.setState({\r\n      remark: input\r\n    });\r\n  }\r\n\r\n  render(){\r\n    return(\r\n<div style={{marginTop:'-15px'}}>\r\n      <table className=\"table table-hover mt-0\">\r\n        <tbody>\r\n        <tr onClick={() => this.showOrders()}>\r\n          <td style={{textAlign: 'left', width: '10%'}} ><b>{this.props.payment_id}</b></td>\r\n          <td style={{textAlign: 'left', width: '10%'}} ><b>{this.props.table_number}</b></td>\r\n          <td style={{textAlign: 'right', width: '10%'}} >{formatNumber(this.props.total_amount)}.-</td>\r\n        <td style={{textAlign: 'center', width: '10%'}} >{this.props.method === 'cash' ? 'เงินสด' :\r\n              this.props.method === 'card' ? 'บัตร' :\r\n              this.props.method === 'transfer' ? 'โอนเงิน' :\r\n              this.props.method === 'room' ? 'ย้ายเข้าบัญชีห้องพัก' :\r\n              this.props.method === 'multiple' ? 'แบ่งจ่าย' :\r\n              'complimentary'\r\n          }</td>\r\n          <td style={{textAlign: 'left', width: '10%'}} >{this.props.number_of_guest}</td>\r\n          <td style={{textAlign: 'left', width: '10%'}} >{this.props.language}</td>\r\n          <td style={{textAlign: 'left', width: '10%'}} >{this.props.short_name}</td>\r\n          <td style={{textAlign: 'left', width: '10%'}} >{moment(this.props.open_at).format('HH:mm')}</td>\r\n          <td style={{textAlign: 'left', width: '10%'}} >{moment(this.props.close_at).format('HH:mm')}</td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n        {this.state.showOrders &&\r\n          <table class=\"table table-borderless\">\r\n            <tbody>\r\n          <tr>\r\n          <td colSpan='9'>\r\n            <div className=\"row\">\r\n              <div className='text-left col-sm-5 pl-4'>\r\n                <p><b>รายการอาหาร:</b></p>\r\n                {this.props.orders.map(order => (\r\n                  <p>{order.quantity} x {order.name}</p>\r\n                ))}\r\n              </div>\r\n              <div className='text-left col-sm-4 pl-4'>\r\n                {this.props.method === \"room\" && <p><b>หมายเลขห้องพัก: </b>{this.props.room_number}</p> }\r\n                {this.props.method === \"transfer\" && <p><b>หมายเลขการโอน: </b>{this.props.room_number}</p> }\r\n                {this.props.method === \"multiple\" && <p><b>แบ่งจ่าย:</b></p> }\r\n                {this.props.method === \"multiple\" && this.props.multiple_payment.map(p => {\r\n                  let type = p.paymentType === 'cash' ? 'เงินสด' :\r\n                  p.paymentType === 'creditCard' ? 'บัตร' :\r\n                  p.paymentType === 'halfHalf' ? 'คนละครึ่ง' :\r\n                  p.paymentType === 'G-Wallet' ? 'G-Wallet' : 'ไทยชนะ';\r\n                  return <p>{type}: {formatNumber(p.amount)}.- {p.paymentType !== 'cash' && `|| ${p.reference}`}</p>\r\n                }) }\r\n                <p><b>ส่วนลด: </b>\r\n                {\r\n                  this.props.discount_type !== undefined?\r\n                   this.props.discount_type === 'percentage' ?\r\n                   `${this.props.discount_amount}% ${this.props.discount_section === 'f&b' ? 'อาหารและเครื่องดื่ม' :this.props.discount_section === 'b' ? 'เฉพาะเครื่องดื่ม' : 'เฉพาะอาหาร'}`:\r\n                   this.props.discount_type === 'amount' ? `มูลค่า${this.props.discount_amount} บาท`\r\n                : 'โต๊ะ complimentary'\r\n                : '-'}\r\n              </p>\r\n              {this.props.discount_type === 'complimentary' && <p><b>หมายเหตู: </b>{this.props.discount_remark}</p>}\r\n              {this.props.service_charge_amount > 0 ? <p><b>Service Charge: </b>{formatNumber(this.props.service_charge_amount)} บาท</p> :''}\r\n              </div>\r\n              <div className='text-left col-sm-3 pl-4'>\r\n                <button className=\"btn btn-danger\" onClick={() => this.submitVoidPayment()}>ยกเลิกการจ่ายเงิน</button>\r\n                {this.state.showRefund &&\r\n                  <div>\r\n                    <div class=\"input-group mb-3\">\r\n                      <div className=\"input-group-prepend\">\r\n                        <span className=\"input-group-text\" >หมายเหตุ</span>\r\n                      </div>\r\n                      <input type=\"text\" className=\"form-control\" value={this.state.remark} onChange={this.remarkOnChange} />\r\n                    </div>\r\n                    <div class=\"input-group mb-3\">\r\n                    <div className=\"input-group-prepend\">\r\n                      <span className=\"input-group-text\" >จำนวนเงิน</span>\r\n                    </div>\r\n                    <input type=\"text\" value={this.state.amount} className=\"form-control\" onChange={this.amountOnChange} />\r\n                  </div>\r\n                  <button onClick={() => this.submitRefund()} className=\"btn btn-danger\">ยืนยัน</button>\r\n                  </div>}\r\n              </div>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n\r\n      </tbody>\r\n    </table>}\r\n    </div>\r\n    )\r\n  }\r\n}\r\n\r\nclass TableSection extends React.Component {\r\n  render() {\r\n    const style = {\r\n      margin: '0px -30px 0px 100px',\r\n      cursor: 'pointer',\r\n      background: this.props.selectedSection === this.props.label ? '#36B6DB' : 'white',\r\n      borderRadius: '5px',\r\n      border: '2px solid #36B6DB',\r\n      height: '80px',\r\n      color: this.props.selectedSection === this.props.label ? 'white' : 'black'\r\n    };\r\n    return (\r\n      <div\r\n        className=\"row tableSection\"\r\n        style={style}\r\n        onClick={() => this.props.onclick(this.props.label)}\r\n      >\r\n        <div className=\"col-sm-12 text-center\">\r\n          <h4 className=\"mt-4\">{this.props.label}</h4>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst TableBox = props => {\r\n  const style = {\r\n    background:\r\n      props.tableInfo.status === 'opened'\r\n        ? '#5291ff'\r\n        : props.tableInfo.status === 'checked' ? '#C82333' : 'white'\r\n  };\r\n  const time = moment(props.tableInfo.timestamp);\r\n  return (\r\n    <div className=\"col-2\">\r\n      <div className=\"row\">\r\n        <div\r\n          className=\"tableBox\"\r\n          style={style}\r\n          onClick={() => props.link(props.tableInfo)}\r\n        >\r\n          <h3 style={{color: 'black'}}>{props.tableInfo.number}</h3>\r\n          {props.tableInfo.status === null ? (\r\n            ''\r\n          ) : (\r\n            <p style={{color: 'black'}}>\r\n              <span>\r\n                <img alt=\"Number of customer\" src={peopleIcon} width=\"20px\" />\r\n              </span>{' '}\r\n              x {props.tableInfo.number_of_guest} | Zone: {props.tableInfo.zone}\r\n              <br /> {time.format('hh:mm A')}\r\n            </p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}